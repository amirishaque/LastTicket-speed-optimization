import React, { useEffect, useState } from 'react';
import '../../styles/ticketmodal/style.css';
import ProgressBar from "@ramonak/react-progress-bar";
import StadiumImg from '../../assets/images/stadium.jpg';
import SeatsImg from '../../assets/images/seats.png'

const TicketModal = ({ isOpen, closeModal }) => {
  const [isLoading, setLoading] = useState(true);
  const [percentage, setPercentage] = useState(0);

  useEffect(() => {
    let timer;
    if (isOpen) {
      // Simulating loading for 3 seconds
      timer = setTimeout(() => {
        setLoading(false);
      }, 3000);
    }
    return () => clearTimeout(timer);
  }, [isOpen]);

  useEffect(() => {
    let progress = 0;
    const interval = setInterval(() => {
      progress++;
      setPercentage(progress);
      if (progress >= 100) {
        clearInterval(interval);
      }
    }, 30);

    return () => clearInterval(interval);
  }, []);

  const handleOutsideClick = (e) => {
    if (e.target.className === 'modal-overlay') {
      closeModal();
    }
  };

  return (
    <>
      {isOpen && (
        <div className="modal-overlay" onClick={handleOutsideClick}>
          <div className="modal-content ticket-modal-content">
            <span className="close-button" onClick={closeModal}>
              &times;
            </span>
            <div className='modal-content-wrapper-ticket'>
              <h2>Tickets are in high demand! Grab yours now before they sell out</h2>
              <div className='eup-wrapper'>
                <div className='eu-wrapper'>
                  <span>
                  <svg fill="#000000" height="50px" width="50px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="0 0 199.666 199.666" xml:space="preserve">
<path d="M165.416,182.417c-1.104,0-2-0.896-2-2v-8.932h-61.583v8.932c0,1.104-0.896,2-2,2s-2-0.896-2-2v-8.932H36.61v8.932
	c0,1.104-0.896,2-2,2s-2-0.896-2-2v-47.932c0-1.104,0.896-2,2-2s2,0.896,2,2v35h61.223v-35c0-1.104,0.896-2,2-2s2,0.896,2,2v35
	h61.583v-35c0-1.104,0.896-2,2-2s2,0.896,2,2v47.932C167.416,181.521,166.521,182.417,165.416,182.417z M155.461,160.053h-46.2
	c-3.482,0-6.316-2.834-6.316-6.316v-1.333c0-2.537,1.503-4.729,3.666-5.733v-32.602c0-5.011,1.438-9.692,3.925-13.652H89.2
	c2.486,3.96,3.925,8.642,3.925,13.652v32.602c2.163,1.004,3.666,3.196,3.666,5.733v1.333c0,3.482-2.834,6.316-6.316,6.316h-46.2
	c-3.482,0-6.316-2.834-6.316-6.316v-1.333c0-2.537,1.504-4.73,3.667-5.733v-32.602c0-5.011,1.438-9.692,3.925-13.652H4v8.931
	c0,1.104-0.896,2-2,2s-2-0.896-2-2V61.417c0-1.104,0.896-2,2-2s2,0.896,2,2v35h44.645c4.236-4.493,10.066-7.467,16.577-8.009V61.417
	c0-1.104,0.896-2,2-2s2,0.896,2,2v26.968c6.635,0.472,12.581,3.469,16.884,8.032h27.524c4.287-4.547,10.209-7.539,16.814-8.027
	V61.417c0-1.104,0.896-2,2-2s2,0.896,2,2v26.986c6.539,0.525,12.395,3.505,16.646,8.014h44.575v-35c0-1.104,0.896-2,2-2s2,0.896,2,2
	v47.931c0,1.104-0.896,2-2,2s-2-0.896-2-2v-8.931h-41.48c2.486,3.96,3.925,8.642,3.925,13.652v32.602
	c2.163,1.003,3.667,3.196,3.667,5.733v1.333C161.777,157.219,158.943,160.053,155.461,160.053z M109.261,150.087
	c-1.277,0-2.316,1.039-2.316,2.316v1.333c0,1.277,1.039,2.316,2.316,2.316h46.2c1.277,0,2.316-1.039,2.316-2.316v-1.333
	c0-1.277-1.039-2.316-2.316-2.316H109.261z M44.274,150.087c-1.277,0-2.316,1.039-2.316,2.316v1.333
	c0,1.277,1.039,2.316,2.316,2.316h46.2c1.277,0,2.316-1.039,2.316-2.316v-1.333c0-1.277-1.039-2.316-2.316-2.316H44.274z
	 M110.61,145.856h43.5v-31.787c0-11.993-9.757-21.75-21.75-21.75s-21.75,9.757-21.75,21.75V145.856z M45.625,145.856h43.5v-31.787
	c0-11.993-9.757-21.75-21.75-21.75s-21.75,9.757-21.75,21.75V145.856z M187.836,88.984h-46.2c-3.482,0-6.316-2.834-6.316-6.316
	v-1.333c0-2.537,1.503-4.729,3.666-5.733V43c0-14.198,11.552-25.75,25.75-25.75s25.75,11.552,25.75,25.75v32.602
	c2.163,1.003,3.667,3.196,3.667,5.733v1.333C194.152,86.15,191.318,88.984,187.836,88.984z M141.636,79.018
	c-1.277,0-2.316,1.039-2.316,2.316v1.333c0,1.277,1.039,2.316,2.316,2.316h46.2c1.277,0,2.316-1.039,2.316-2.316v-1.333
	c0-1.277-1.039-2.316-2.316-2.316H141.636z M142.985,74.787h43.5V43c0-11.993-9.757-21.75-21.75-21.75s-21.75,9.757-21.75,21.75
	V74.787z M122.85,88.984h-46.2c-3.482,0-6.316-2.834-6.316-6.316v-1.333c0-2.537,1.504-4.73,3.667-5.733V43
	c0-14.198,11.552-25.75,25.75-25.75S125.5,28.801,125.5,43v32.602c2.163,1.004,3.666,3.196,3.666,5.733v1.333
	C129.166,86.15,126.332,88.984,122.85,88.984z M76.649,79.018c-1.277,0-2.316,1.039-2.316,2.316v1.333
	c0,1.277,1.039,2.316,2.316,2.316h46.2c1.277,0,2.316-1.039,2.316-2.316v-1.333c0-1.277-1.039-2.316-2.316-2.316H76.649z M78,74.787
	h43.5V43c0-11.993-9.757-21.75-21.75-21.75S78,31.006,78,43V74.787z M57.863,88.984h-46.2c-3.482,0-6.316-2.834-6.316-6.316v-1.333
	c0-2.537,1.504-4.73,3.667-5.733V43c0-14.198,11.552-25.75,25.75-25.75S60.514,28.801,60.514,43v32.602
	c2.163,1.004,3.667,3.196,3.667,5.733v1.333C64.181,86.15,61.347,88.984,57.863,88.984z M11.663,79.018
	c-1.277,0-2.316,1.039-2.316,2.316v1.333c0,1.277,1.039,2.316,2.316,2.316h46.2c1.277,0,2.317-1.039,2.317-2.316v-1.333
	c0-1.277-1.04-2.316-2.317-2.316H11.663z M13.014,74.787h43.5V43c0-11.993-9.757-21.75-21.75-21.75S13.014,31.006,13.014,43V74.787z
	"/>
</svg>
                  </span>
                  <p>10 tickets are remaining for this event on our site.</p>
                </div>
                <div className='eu-wrapper'>

                  <span>
                  <svg fill="#000000" height="50px" width="50px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	 viewBox="0 0 305.41 305.41" xml:space="preserve">
<g>
	<g>
		<path d="M297.91,264.381c-1.92,0-3.839-0.732-5.304-2.197l-42.195-42.195c-2.929-2.928-2.929-7.677,0-10.606
			c2.929-2.929,7.678-2.929,10.607,0l42.195,42.195c2.929,2.929,2.929,7.678,0,10.606
			C301.749,263.649,299.829,264.381,297.91,264.381z"/>
	</g>
	<g>
		<path d="M260.15,248.79c-3.084,0-5.974-1.916-7.066-4.988l-12.24-34.407c-0.971-2.728-0.284-5.77,1.763-7.817
			c2.049-2.048,5.09-2.732,7.817-1.763l35.795,12.732c3.902,1.388,5.94,5.677,4.553,9.58c-1.389,3.903-5.679,5.938-9.58,4.553
			l-20.926-7.443l6.951,19.538c1.387,3.902-0.65,8.191-4.553,9.58C261.833,248.65,260.984,248.79,260.15,248.79z"/>
	</g>
	<g>
		<path d="M132.639,98.788c-8.818,0-15.576,5.006-18.18,12.817h35.535C147.636,103.63,141.336,98.788,132.639,98.788z"/>
		<path d="M253.583,41.029H11.827C5.306,41.029,0,46.336,0,52.859V164.2c0,6.522,5.306,11.829,11.827,11.829h241.756
			c6.52,0,11.827-5.307,11.827-11.829V52.859C265.41,46.336,260.103,41.029,253.583,41.029z M95.188,133.404
			c-0.453,11.353-10.138,18.969-24.099,18.969c-9.163,0-17.61-3.324-23.786-9.36c-2.963-2.895-3.017-7.643-0.121-10.606
			c2.893-2.962,7.642-3.017,10.605-0.122c3.405,3.328,8.005,5.087,13.302,5.087c2.095,0,8.941-0.328,9.11-4.552
			c0.079-2.095-2.132-3.334-10.753-6.007c-9.073-2.813-22.785-7.065-22.785-22.156c0-12.483,10.12-20.87,25.183-20.87
			c6.641,0,12.91,1.682,18.638,4.998c3.584,2.076,4.808,6.664,2.731,10.249c-2.076,3.585-6.664,4.806-10.249,2.731
			c-3.46-2.004-7.098-2.979-11.12-2.979c-3.062,0-10.183,0.572-10.183,5.87c0,3.283,2.285,4.746,12.228,7.829
			C82.583,115.183,95.722,119.257,95.188,133.404z M158.515,126.606h-44.069c2.596,7.875,9.361,12.924,18.193,12.924
			c6.388,0,11.972-2.243,15.724-6.315c2.807-3.046,7.552-3.239,10.598-0.433c3.046,2.807,3.24,7.552,0.434,10.598
			c-6.626,7.19-16.128,11.15-26.755,11.15c-19.58,0-34.346-15.229-34.346-35.424c0-20.134,14.766-35.317,34.346-35.317
			c19.339,0,33.376,14.853,33.376,35.317C166.015,123.248,162.656,126.606,158.515,126.606z M185.885,147.029
			c0,4.142-3.357,7.5-7.5,7.5c-4.143,0-7.5-3.358-7.5-7.5v-80c0-4.142,3.357-7.5,7.5-7.5c4.143,0,7.5,3.358,7.5,7.5V147.029z
			 M217.865,147.029c0,4.142-3.357,7.5-7.5,7.5c-4.143,0-7.5-3.358-7.5-7.5v-80c0-4.142,3.357-7.5,7.5-7.5
			c4.143,0,7.5,3.358,7.5,7.5V147.029z"/>
	</g>
</g>
</svg>
                  </span>
                  <p>This event is likely to sell out within 7 days on our site.</p>
                </div>
                <div className='eu-wrapper'>
                  <span>
                    <img src={StadiumImg} alt='' width={50}  height={50}/>
                  </span>
                  <p>Less than the total tickets in the venue currently available.</p>
                </div>
              </div>
              <div className='loader-wrapper-bar'>
                {/* {isLoading && (
                  <div className='loader-bar-wrapper'>
                    <div className='loader-bar' style={{ width: `${percentage}%` }}></div>
                    <span className='loading-percentage'>{percentage}%</span>
                  </div>
                )} */}
                {/* {!isLoading && <>
                  <div className='loader-bar' style={{ width: `${percentage}%` }}></div>
                    <span className='loading-percentage'>{percentage}%</span>
                </>} */}
                  <div className='loader-bar-wrapper'>
                <ProgressBar
  completed={100}
  className="wrapper-l"
  barContainerClassName="container-l"
  completedClassName="barCompleted-l"
  labelClassName="label-l"
/>
</div>
              </div>
            </div>
          </div>
        </div>
      )}
    </>
  );
};

export default TicketModal;
